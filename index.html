<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Nerdio + Recast + Intune — Better Together & Click-Through Demo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: {} } };
  </script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-slate-100 antialiased selection:bg-cyan-300/30 selection:text-white">
  <main class="w-full flex items-center justify-center py-8">
    <section class="w-[92vw] max-w-[1280px] bg-slate-900/60 backdrop-blur rounded-2xl shadow-2xl ring-1 ring-slate-800">
      <header class="p-5 pb-3">
        <div class="flex items-start justify-between gap-4 flex-wrap">
          <div class="space-y-1">
            <h1 class="text-xl font-bold tracking-tight">Nerdio + Recast + Intune</h1>
            <p class="text-slate-400 text-sm">Strategy brief in <em>Better Together</em> • Click-through demo shows how we support <strong>Intune</strong> across desktops and apps.</p>
          </div>
          <nav role="tablist" aria-label="Pages" class="flex items-center gap-2">
            <button id="tab-better" role="tab" aria-controls="panel-better" aria-selected="true" class="inline-flex items-center gap-2 rounded-xl px-3.5 py-2 font-semibold tracking-wide text-white bg-slate-800/80 ring-1 ring-slate-700 hover:bg-slate-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400">
              <i data-lucide="sparkles" class="w-4 h-4"></i><span>Better Together</span>
            </button>
            <button id="tab-demo" role="tab" aria-controls="panel-demo" aria-selected="false" class="inline-flex items-center gap-2 rounded-xl px-3.5 py-2 font-semibold tracking-wide text-white bg-slate-800/50 ring-1 ring-slate-700 hover:bg-slate-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400">
              <i data-lucide="play-circle" class="w-4 h-4"></i><span>Demo</span>
            </button>
          </nav>
        </div>
      </header>

      <!-- Better Together (default) -->
      <div id="panel-better" role="tabpanel" aria-labelledby="tab-better" class="block">
        <div class="p-6 pt-4 space-y-6">
          <header class="space-y-2">
            <h2 class="text-2xl font-extrabold tracking-tight">Better Together | Nerdio + Recast</h2>
            <p class="text-slate-300 text-base">“One Intune-governed workspace. Desktops right-sized. Apps delivered and patched. Day one.”</p>
          </header>

          <!-- 3x2 bucket grid to avoid scrolling -->
          <div class="grid md:grid-cols-3 gap-4">
            <!-- The Offer -->
            <section aria-labelledby="offer" class="rounded-2xl ring-1 ring-slate-800 bg-slate-900/70 p-5">
              <div class="flex items-center gap-2 mb-3">
                <i data-lucide="handshake" class="w-5 h-5 text-emerald-300"></i>
                <h3 id="offer" class="text-lg font-semibold">The Offer</h3>
              </div>
              <ul class="space-y-2 text-slate-300 text-sm">
                <li class="flex items-start gap-2"><i data-lucide="shield" class="w-4 h-4 mt-0.5 text-blue-300"></i><span>One workspace governed by Intune — desktops + apps together.</span></li>
                <li class="flex items-start gap-2"><i data-lucide="zap" class="w-4 h-4 mt-0.5 text-emerald-300"></i><span>One motion — provisioned, right-sized, patched, policy-compliant.</span></li>
                <li class="flex items-start gap-2"><i data-lucide="microsoft" class="w-4 h-4 mt-0.5 text-indigo-300"></i><span>Azure-native, Intune-driven, Marketplace/MACC eligible.</span></li>
              </ul>
            </section>

            <!-- Why Change -->
            <section aria-labelledby="why-change" class="rounded-2xl ring-1 ring-slate-800 bg-slate-900/70 p-5">
              <div class="flex items-center gap-2 mb-3">
                <i data-lucide="alert-triangle" class="w-5 h-5 text-amber-300"></i>
                <h3 id="why-change" class="text-lg font-semibold">Why Change</h3>
              </div>
              <ol class="list-decimal pl-4 space-y-2 text-slate-300 text-sm">
                <li>Manual app delivery stalls projects.</li>
                <li>Overprovisioned infra wastes money (up to 55%).</li>
                <li>Fragmented governance = compliance drift.</li>
              </ol>
            </section>

            <!-- Why Now -->
            <section aria-labelledby="why-now" class="rounded-2xl ring-1 ring-slate-800 bg-slate-900/70 p-5">
              <div class="flex items-center gap-2 mb-3">
                <i data-lucide="timer" class="w-5 h-5 text-sky-300"></i>
                <h3 id="why-now" class="text-lg font-semibold">Why Now</h3>
              </div>
              <ol class="list-decimal pl-4 space-y-2 text-slate-300 text-sm">
                <li>Faster OS/SaaS/AI updates.</li>
                <li>Zero-day pressure & audits.</li>
                <li>Do more with less via automation.</li>
              </ol>
            </section>

            <!-- Why Better Together -->
            <section aria-labelledby="why-better" class="rounded-2xl ring-1 ring-slate-800 bg-slate-900/70 p-5">
              <div class="flex items-center gap-2 mb-3">
                <i data-lucide="layers" class="w-5 h-5 text-indigo-300"></i>
                <h3 id="why-better" class="text-lg font-semibold">Why Better Together</h3>
              </div>
              <ul class="space-y-2 text-slate-300 text-sm">
                <li>Complete the workspace — desktops + apps governed by Intune from day one.</li>
                <li>ROI in days — &lt;1 hr to live desktops + apps, &gt;95% patch compliance, 30–40% lower ops (up to 55% Azure savings).</li>
                <li>Migration-safe & MSP-ready — repeatable across tenants.</li>
              </ul>
            </section>

            <!-- Use Cases (split) -->
            <section aria-labelledby="use-cases" class="rounded-2xl ring-1 ring-slate-800 bg-slate-900/70 p-5 md:col-span-2">
              <div class="flex items-center gap-2 mb-3">
                <i data-lucide="check-square" class="w-5 h-5 text-emerald-300"></i>
                <h3 id="use-cases" class="text-lg font-semibold">Use Cases</h3>
              </div>
              <div class="grid sm:grid-cols-2 gap-3 text-sm text-slate-300">
                <ul class="list-disc pl-5 space-y-2">
                  <li>Windows 365 / AVD rollout — desktops + apps + policy via Intune.</li>
                  <li>SCCM → Intune modernization.</li>
                  <li>Zero-day compliance — coordinated patching.</li>
                </ul>
                <ul class="list-disc pl-5 space-y-2">
                  <li>M&amp;A / rapid onboarding — governed desktops + apps in &lt;1 hr.</li>
                  <li>MSP multi-tenant enablement — repeatable “workspace in a box”.</li>
                </ul>
              </div>
            </section>
          </div>
        </div>
      </div>

      <!-- Demo -->
      <div id="panel-demo" role="tabpanel" aria-labelledby="tab-demo" class="hidden">
        <div class="flex flex-col gap-4 p-5 pt-2">
          <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
            <div class="space-y-0.5">
              <h2 class="text-lg font-bold tracking-tight">Demo — Intune-governed delivery across desktops (Nerdio) and apps (Recast)</h2>
              <p class="text-slate-400 text-sm">Click <strong>Start</strong> to highlight each role and outcome. <span class="hidden sm:inline">We support Intune as the governance “brain.”</span></p>
            </div>
            <nav aria-label="Demo controls" class="flex items-center gap-2">
              <button id="btn-start" class="inline-flex items-center gap-2 rounded-xl px-3.5 py-2 font-semibold tracking-wide text-white bg-gradient-to-r from-indigo-500 to-emerald-400 shadow ring-1 ring-white/10 hover:brightness-110 active:translate-y-px focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400">
                <i data-lucide="play" class="w-4 h-4"></i><span>Start</span>
              </button>
              <button id="btn-reset" class="inline-flex items-center gap-2 rounded-xl px-3.5 py-2 font-semibold tracking-wide text-slate-100 bg-slate-800/70 hover:bg-slate-800 active:translate-y-px ring-1 ring-slate-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-rose-400">
                <i data-lucide="rotate-ccw" class="w-4 h-4"></i><span>Reset</span>
              </button>
            </nav>
          </div>

          <!-- Click-through canvas -->
          <div id="stage" class="relative overflow-hidden rounded-2xl p-4 md:p-6 min-h-[620px] bg-gradient-to-b from-slate-900 to-slate-950 ring-1 ring-slate-800" aria-live="polite">
            <!-- Intune governance bar -->
            <div id="intune-bar" class="mx-auto max-w-xl rounded-xl bg-blue-950/60 ring-2 ring-blue-600 shadow-xl px-4 py-3 text-center">
              <div class="inline-flex items-center gap-2">
                <i data-lucide="shield-check" class="w-4 h-4 text-blue-300"></i>
                <span class="text-xs font-black tracking-wide px-2.5 py-1 rounded-full text-blue-950 bg-blue-300">INTUNE — Control Plane</span>
              </div>
              <div class="text-sm font-semibold mt-1">One workspace, governed by Intune.</div>
            </div>

            <!-- Two-column approach (world-class slide style) -->
            <div class="grid md:grid-cols-2 gap-6 mt-6">
              <!-- Nerdio column -->
              <section id="col-nerdio" class="rounded-2xl ring-1 ring-emerald-600/40 bg-emerald-950/30 p-4">
                <header class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <i data-lucide="monitor" class="w-5 h-5 text-emerald-300"></i>
                    <h3 class="font-bold text-emerald-200">Nerdio — Desktop Orchestration</h3>
                  </div>
                  <span class="text-xs text-emerald-200/90 ring-1 ring-emerald-600 rounded-full px-2 py-0.5">Right-sized Desktops</span>
                </header>

                <div class="mt-4 grid gap-3">
                  <div class="rounded-xl bg-slate-900/60 ring-1 ring-slate-800 p-3">
                    <div class="flex items-center justify-between text-xs text-slate-300 mb-2"><span>Cloud PC Pools</span><span>Windows 365</span></div>
                    <div id="nerdio-cloudpc" class="grid grid-cols-8 gap-1.5">
                      <!-- slots filled by JS -->
                    </div>
                  </div>

                  <div class="rounded-xl bg-slate-900/60 ring-1 ring-slate-800 p-3">
                    <div class="flex items-center justify-between text-xs text-slate-300 mb-2"><span>AVD Host Pools</span><span>Autoscale</span></div>
                    <div id="nerdio-avd" class="grid grid-cols-8 gap-1.5">
                      <!-- slots filled by JS -->
                    </div>
                  </div>

                  <div class="rounded-xl bg-slate-900/60 ring-1 ring-slate-800 p-3">
                    <div class="flex items-center justify-between text-xs text-slate-300 mb-2"><span>Policy via Intune</span><span class="flex items-center gap-1"><i data-lucide="shield" class="w-3.5 h-3.5"></i>Identity-driven</span></div>
                    <div id="nerdio-policy" class="flex flex-wrap gap-1.5">
                      <!-- dots by JS -->
                    </div>
                  </div>

                  <div class="flex items-center justify-between">
                    <span class="text-xs text-emerald-200/90">Benefit</span>
                    <span id="metric-savings" class="text-xs font-semibold rounded-full bg-emerald-900/40 ring-1 ring-emerald-600 px-2 py-0.5 opacity-80">Up to 55% Azure savings</span>
                  </div>
                </div>
              </section>

              <!-- Recast column -->
              <section id="col-recast" class="rounded-2xl ring-1 ring-amber-600/40 bg-amber-950/20 p-4">
                <header class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <i data-lucide="package" class="w-5 h-5 text-amber-300"></i>
                    <h3 class="font-bold text-amber-100">Recast — Application Workspace</h3>
                  </div>
                  <span class="text-xs text-amber-200/90 ring-1 ring-amber-500 rounded-full px-2 py-0.5">Apps Delivered &amp; Patched</span>
                </header>

                <div class="mt-4 grid gap-3">
                  <div class="rounded-xl bg-slate-900/60 ring-1 ring-slate-800 p-3">
                    <div class="text-xs text-slate-300 mb-2">Curated Catalog (examples)</div>
                    <div id="app-icons" class="flex flex-wrap gap-1.5">
                      <!-- app pills by JS -->
                    </div>
                  </div>

                  <div class="rounded-xl bg-slate-900/60 ring-1 ring-slate-800 p-3">
                    <div class="text-xs text-slate-300 mb-2">Rings &amp; Policy via Intune</div>
                    <div id="recast-rings" class="grid grid-cols-3 gap-2">
                      <!-- rings by JS -->
                    </div>
                  </div>

                  <div class="flex items-center justify-between">
                    <span class="text-xs text-amber-200/90">Benefit</span>
                    <span id="metric-compliance" class="text-xs font-semibold rounded-full bg-amber-900/40 ring-1 ring-amber-500 px-2 py-0.5 opacity-80">&gt;95% compliance</span>
                  </div>
                </div>
              </section>
            </div>

            <!-- Outcome band -->
            <div id="outcome" class="mt-6 mx-auto max-w-3xl rounded-2xl border border-emerald-300/40 bg-emerald-900/20 px-6 py-4 flex items-center justify-center gap-3 text-center">
              <span class="w-3 h-3 rounded-full bg-emerald-300 shadow-[0_0_14px_3px] shadow-emerald-300/60"></span>
              <strong class="text-xl md:text-3xl font-extrabold text-emerald-100">Day One Workspace</strong>
            </div>

            <!-- Step text -->
            <p id="step-caption" class="mt-3 text-center text-sm text-slate-300">Ready to start</p>

            <!-- Energy arrows overlay -->
            <svg class="pointer-events-none absolute inset-0" viewBox="0 0 1280 700" aria-hidden="true">
              <defs>
                <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
                  <path d="M0,0 L10,5 L0,10 z" fill="#93c5fd"></path>
                </marker>
                <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
                  <path d="M0,0 L10,5 L0,10 z" fill="#6ee7b7"></path>
                </marker>
                <marker id="arrowYellow" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
                  <path d="M0,0 L10,5 L0,10 z" fill="#fde68a"></path>
                </marker>
              </defs>
              <!-- Intune beam (top center down) -->
              <path id="beam-intune" d="M640,130 L640,310" fill="none" stroke="#93c5fd" stroke-width="10" stroke-linecap="round" opacity="0"></path>
              <!-- Nerdio -> Outcome -->
              <path id="path-n2w" d="M260,390 C 460,430 560,430 640,400" fill="none" stroke="#34d399" stroke-width="3" marker-end="url(#arrowGreen)" opacity="0.25"></path>
              <circle id="energy-n" r="5" fill="#6ee7b7" opacity="0"></circle>
              <!-- Recast -> Outcome -->
              <path id="path-r2w" d="M1020,390 C 820,430 720,430 640,400" fill="none" stroke="#fbbf24" stroke-width="3" marker-end="url(#arrowYellow)" opacity="0.25"></path>
              <circle id="energy-r" r="5" fill="#fde68a" opacity="0"></circle>
              <!-- Intune -> Outcome link -->
              <path id="path-i2w" d="M640,160 C 640,220 640,260 640,300" fill="none" stroke="#93c5fd" stroke-width="3" marker-end="url(#arrowBlue)" opacity="0.25"></path>
              <circle id="energy-i" r="5" fill="#93c5fd" opacity="0"></circle>
            </svg>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // ---------- STATE ----------
    const STATE = {
      tab: 'better',       // Better Together opens first
      playing: false,
      step: 0,             // 0 idle, 1..5 steps
      timers: [],
      raf: null,
      reduced: window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches
    };

    // ---------- ELEMENTS ----------
    const tabs = {
      better: document.getElementById('tab-better'),
      demo: document.getElementById('tab-demo')
    };
    const panels = {
      better: document.getElementById('panel-better'),
      demo: document.getElementById('panel-demo')
    };

    const btnStart = document.getElementById('btn-start');
    const btnReset = document.getElementById('btn-reset');

    const caption = document.getElementById('step-caption');
    const intuneBar = document.getElementById('intune-bar');
    const colN = document.getElementById('col-nerdio');
    const colR = document.getElementById('col-recast');
    const outcome = document.getElementById('outcome');

    const neridioCloud = document.getElementById('nerdio-cloudpc');
    const neridioAvd = document.getElementById('nerdio-avd');
    const neridioPolicy = document.getElementById('nerdio-policy');
    const recastRings = document.getElementById('recast-rings');
    const appIcons = document.getElementById('app-icons');

    const paths = {
      beam: document.getElementById('beam-intune'),
      i2w: document.getElementById('path-i2w'),
      n2w: document.getElementById('path-n2w'),
      r2w: document.getElementById('path-r2w')
    };
    const energy = {
      i: document.getElementById('energy-i'),
      n: document.getElementById('energy-n'),
      r: document.getElementById('energy-r')
    };

    // ---------- HELPERS ----------
    function switchTab(to) {
      STATE.tab = to;
      Object.keys(tabs).forEach(k => {
        const sel = (k === to);
        tabs[k].setAttribute('aria-selected', String(sel));
        tabs[k].classList.toggle('bg-slate-800/80', sel);
        tabs[k].classList.toggle('bg-slate-800/50', !sel);
        panels[k].classList.toggle('hidden', !sel);
        panels[k].classList.toggle('block', sel);
      });
      try { window.lucide && window.lucide.createIcons && window.lucide.createIcons(); } catch(_) {}
    }
    function clearTimers() { while (STATE.timers.length) clearTimeout(STATE.timers.pop()); }
    function stopRAF() { if (STATE.raf) cancelAnimationFrame(STATE.raf); STATE.raf = null; }
    function setOpacity(el, v){ if (el) el.setAttribute('opacity', String(v)); }
    function moveAlongPath(circle, path, progress){
      const len = path.getTotalLength();
      const pt = path.getPointAtLength(progress * len);
      circle.setAttribute('cx', pt.x);
      circle.setAttribute('cy', pt.y);
    }
    function pill(txt) {
      const s = document.createElement('span');
      s.className = 'text-[10px] md:text-xs rounded-md px-2 py-1 ring-1 ring-slate-700 bg-slate-950/60';
      s.textContent = txt;
      return s;
    }
    function dot(active=false) {
      const d = document.createElement('span');
      d.className = 'w-2 h-2 rounded-full ' + (active ? 'bg-emerald-300' : 'bg-slate-700');
      return d;
    }
    function bar(fill=0) {
      const wrap = document.createElement('div');
      wrap.className = 'h-2 rounded-md bg-slate-800 overflow-hidden';
      const b = document.createElement('div');
      b.style.width = fill + '%';
      b.className = 'h-full bg-gradient-to-r from-indigo-400 to-emerald-400';
      wrap.appendChild(b);
      return wrap;
    }

    // ---------- BUILD STATIC CELLS ----------
    // Nerdio pools cells
    for (let i=0;i<16;i++){
      const cell = document.createElement('div');
      cell.className = 'h-5 rounded-md bg-slate-800';
      neridioCloud.appendChild(cell);
    }
    for (let i=0;i<16;i++){
      const cell = document.createElement('div');
      cell.className = 'h-5 rounded-md bg-slate-800';
      neridioAvd.appendChild(cell);
    }
    // Policy dots
    for (let i=0;i<24;i++) neridioPolicy.appendChild(dot(false));
    // Recast rings (3 columns: Business Unit / Subsidiary / Region)
    for (let c=0;c<3;c++){
      const card = document.createElement('div');
      card.className = 'rounded-lg ring-1 ring-slate-700 p-3 bg-slate-950/50';
      const title = document.createElement('div');
      title.className = 'text-[11px] text-slate-300 mb-2';
      title.textContent = ['Business Unit','Subsidiary','Region'][c];
      card.appendChild(title);
      card.appendChild(bar(0));
      recastRings.appendChild(card);
    }
    // Catalog examples (truthful placeholders)
    ['M365','Teams','Edge','Chrome','Zoom','Slack','SAP','Adobe','Box','Okta'].forEach(name=>{
      appIcons.appendChild(pill(name));
    });

    // ---------- RENDER STEPS ----------
    function resetVisual() {
      caption.textContent = 'Ready to start';
      intuneBar.classList.remove('ring-4','ring-offset-2','ring-offset-slate-900','animate-pulse');
      colN.classList.remove('ring-2','ring-emerald-400','shadow-emerald-500/20');
      colR.classList.remove('ring-2','ring-amber-400','shadow-amber-500/20');
      outcome.style.boxShadow = '';
      outcome.style.transform = 'scale(1)';
      setOpacity(paths.beam, 0);
      setOpacity(energy.i, 0);
      setOpacity(energy.n, 0);
      setOpacity(energy.r, 0);
      // reset fills
      Array.from(neridioCloud.children).forEach(c=> c.style.background = 'rgb(30 41 59)');
      Array.from(neridioAvd.children).forEach(c=> c.style.background = 'rgb(30 41 59)');
      Array.from(neridioPolicy.children).forEach((d,i)=> d.className = 'w-2 h-2 rounded-full bg-slate-700');
      Array.from(recastRings.children).forEach((card)=> {
        const barEl = card.querySelector('div > div');
        if (barEl) barEl.style.width = '0%';
      });
    }

    function step1() {
      caption.textContent = 'Step 1 — Intune Foundation: governance “brain” is active.';
      intuneBar.classList.add('animate-pulse','ring-4','ring-offset-2','ring-offset-slate-900');
      setOpacity(paths.beam, 0.85);
      if (STATE.reduced) return;
      const start = performance.now(), dur = 900;
      const tick = (t)=>{
        const p = Math.min(1, (t-start)/dur);
        setOpacity(energy.i, 1);
        moveAlongPath(energy.i, paths.i2w, p);
        if (p<1) STATE.raf = requestAnimationFrame(tick);
      };
      STATE.raf = requestAnimationFrame(tick);
    }

    function step2() {
      caption.textContent = 'Step 2 — Nerdio right-sizes desktops; Azure cost reduced up to 55%.';
      colN.classList.add('ring-2','ring-emerald-400','shadow-emerald-500/20');
      // Fill pool cells to show autoscale
      Array.from(neridioCloud.children).forEach((c,i)=> setTimeout(()=> c.style.background='linear-gradient(90deg, rgba(129,140,248,0.8), rgba(16,185,129,0.8))', i*40));
      Array.from(neridioAvd.children).forEach((c,i)=> setTimeout(()=> c.style.background='linear-gradient(90deg, rgba(129,140,248,0.8), rgba(16,185,129,0.8))', i*40));
      // Policy dots light up
      Array.from(neridioPolicy.children).forEach((d,i)=> setTimeout(()=> d.className='w-2 h-2 rounded-full bg-emerald-300', i*30));

      if (STATE.reduced) return;
      const start = performance.now(), dur = 900;
      const tick = (t)=>{
        const p = Math.min(1, (t-start)/dur);
        setOpacity(energy.n, 1);
        moveAlongPath(energy.n, paths.n2w, p);
        if (p<1) STATE.raf = requestAnimationFrame(tick);
      };
      STATE.raf = requestAnimationFrame(tick);
    }

    function step3() {
      caption.textContent = 'Step 3 — Recast delivers and patches apps; compliance >95%.';
      colR.classList.add('ring-2','ring-amber-400','shadow-amber-500/20');
      // Advance rings bars to represent staged rollout
      Array.from(recastRings.children).forEach((card,i)=>{
        const barEl = card.querySelector('div > div');
        setTimeout(()=> barEl.style.width = ['70%','85%','95%'][i], i*150);
      });
      if (STATE.reduced) return;
      const start = performance.now(), dur = 900;
      const tick = (t)=>{
        const p = Math.min(1, (t-start)/dur);
        setOpacity(energy.r, 1);
        moveAlongPath(energy.r, paths.r2w, p);
        if (p<1) STATE.raf = requestAnimationFrame(tick);
      };
      STATE.raf = requestAnimationFrame(tick);
    }

    function step4() {
      caption.textContent = 'Step 4 — Convergence: desktops + apps provisioned, patched, and governed in one motion.';
      outcome.style.boxShadow = '0 0 0 4px rgba(52,211,153,.45), 0 0 52px rgba(52,211,153,.35)';
      outcome.style.transform = 'scale(1.04)';
    }

    function step5() {
      caption.textContent = 'Step 5 — Migration-safe • MSP-ready • Intune-driven. Loop or Reset to replay.';
    }

    // ---------- ORCHESTRATION ----------
    function startDemo() {
      if (STATE.playing) return;
      STATE.playing = true;
      btnStart.querySelector('span').textContent = 'Playing…';
      btnStart.setAttribute('aria-pressed', 'true');
      clearTimers(); stopRAF(); resetVisual();

      // timings
      const t1=0, t2=1200, t3=2400, t4=3600, t5=5000, stopAt=7000;
      STATE.timers.push(setTimeout(step1, t1));
      STATE.timers.push(setTimeout(step2, t2));
      STATE.timers.push(setTimeout(step3, t3));
      STATE.timers.push(setTimeout(step4, t4));
      STATE.timers.push(setTimeout(step5, t5));
      STATE.timers.push(setTimeout(()=> {
        STATE.playing=false;
        btnStart.querySelector('span').textContent='Start';
        btnStart.setAttribute('aria-pressed', 'false');
      }, stopAt));
    }

    function resetDemo() {
      STATE.playing = false;
      btnStart.querySelector('span').textContent='Start';
      btnStart.setAttribute('aria-pressed','false');
      clearTimers(); stopRAF(); resetVisual();
    }

    // ---------- EVENTS ----------
    tabs.better.addEventListener('click', ()=> switchTab('better'));
    tabs.demo.addEventListener('click', ()=> switchTab('demo'));
    btnStart.addEventListener('click', startDemo);
    btnReset.addEventListener('click', resetDemo);
    document.addEventListener('keydown', (e)=>{
      const k = e.key.toLowerCase();
      if (k==='b') switchTab('better');
      if (k==='d') switchTab('demo');
      if (k==='s') startDemo();
      if (k==='r') resetDemo();
    });

    // ---------- INIT ----------
    try {
      if (window.lucide && typeof window.lucide.createIcons === 'function') window.lucide.createIcons();
      else setTimeout(()=> window.lucide && window.lucide.createIcons && window.lucide.createIcons(), 60);
    } catch(_) {}
    switchTab('better'); // Better Together first
    resetDemo();         // prepare demo visuals
  </script>
</body>
</html>
